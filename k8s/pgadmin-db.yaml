apiVersion: apps/v1
kind: Deployment
metadata:
  name: pgadmin-deployment
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pgadmin
  template:
    metadata:
      labels:
        app: pgadmin
    spec:
      containers:
        - name: pgadmin # ‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡πà‡∏≤ container_name
          image: dpage/pgadmin4:latest
          ports:
            - containerPort: 80 # Port ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
            
          # ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤ EMAIL/PASSWORD ‡∏à‡∏≤‡∏Å Secret
          envFrom:
            - secretRef:
                name: pgadmin-secret

---
# ‡πÄ‡∏õ‡∏¥‡∏î Port ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡πà‡∏≤ "5051:80")
apiVersion: v1
kind: Service
metadata:
  name: pgadmin-svc
spec:
  type: NodePort # üëà ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å Cluster (localhost) ‡πÑ‡∏î‡πâ
  selector:
    app: pgadmin
  ports:
    - protocol: TCP
      port: 80       # Port ‡∏†‡∏≤‡∏¢‡πÉ‡∏ô Cluster
      targetPort: 80 # Port ‡∏Ç‡∏≠‡∏á Container
      #
      # ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ 30051 ‡πÅ‡∏ó‡∏ô 5051
      #
      nodePort: 30051